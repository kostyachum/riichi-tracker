{% extends 'base.html' %}
{% block content %}
<header class="flex items-baseline justify-between mb-6">
    <h1 class="text-2xl font-semibold tracking-tight">Riichi Mahjong Tracker</h1>
    <nav>
        <a href="/admin/" class="inline-flex items-center rounded-md bg-slate-900 px-3 py-1.5 text-sm font-medium text-white shadow hover:bg-slate-800">Admin</a>
    </nav>
</header>


{% if games %}
<ul role="list" class="list rounded-box bg-white border border-slate-200 shadow-sm">
    {% for g in games %}
    <li class="list-row">
        <a href="/admin/games/game/{{ g.id }}/change/" class="list-item hover:bg-slate-50">
            <div class="flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between">
                <div>
                    <h3 class="text-sm font-semibold text-slate-900">Game #{{ g.id }}</h3>
                    <p class="mt-0.5 text-sm text-slate-500">{{ g.played_at|date:"Y-m-d H:i" }}</p>
                </div>
                <div class="flex flex-wrap gap-2">
                    <span class="badge badge-ghost">Start {{ g.start_score }}</span>
                    <span class="badge badge-ghost">Target {{ g.target_score }}</span>
                    <span class="badge badge-ghost">Oka {{ g.oka_value }}</span>
                </div>
            </div>
            <div class="mt-3">
                <ul class="flex flex-wrap gap-2">
                    {% for r in g.gameresult_set.all %}
                    <li>
                  <span class="badge">
                    {{ r.rank|default:"-" }}. {{ r.player.name }} â€” {{ r.score_raw }}
                  </span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </a>
    </li>
    {% endfor %}
</ul>
{% else %}
<div class="rounded-lg border border-dashed border-slate-300 bg-white p-8 text-center">
    <p class="text-slate-600">No games yet.</p>
    <p class="mt-2"><a class="text-sky-700 hover:underline font-medium" href="/admin/games/game/add/">Add your first game in Admin</a></p>
</div>
{% endif %}
{% endblock %}